<!doctype html>
<html lang="en" class="h-100">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v4.1.1">
    <title>Blockchain</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.5/examples/sticky-footer-navbar/">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
    <script>
       window.jQuery || document.write('<script src="assets/dist/js/jquery.js"><\/script>');
    </script>
    <!-- Bootstrap core CSS -->
<!-- <link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet"> -->

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap-theme.min.css" integrity="sha384-6pzBo3FDv/PJ8r2KRkGHifhEocL+1X2rVCTTkUfGk7/0pbek5mMa1upzvWbrUbOZ" crossorigin="anonymous">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    <!-- Custom styles for this template -->
    <link href="sticky-footer-navbar.css" rel="stylesheet">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {packages:["orgchart"]});
      google.charts.setOnLoadCallback(drawChart);

      var aux3= {{response|safe}};
      function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Name');
        data.addColumn('string', 'Nodo-');
        data.addColumn('string', 'ToolTip');
        var auxiliar = {{response.chain|safe}};
        // For each orgchart box, provide the name, manager, and tooltip to show.
        data.addRows([['CHAIN','','']]);
        for(var i=0;i<auxiliar.length;i++){
          data.addRows([[{'v':i.toString(), 'f': 'Index: ' +auxiliar[i].index + '<br>' + 'Proof: ' + auxiliar[i].proof + '<br>' + 'Timestamp: ' + auxiliar[i].timestamp + '<br>' + 'Previous Hash: ' +  auxiliar[i].previous_hash},'CHAIN','']]);
          if (auxiliar[i].transactions.length>0){
            for(var j=0;j<auxiliar[i].transactions.length;j++){
              if (j==0){
                data.addRows([[{'v': i.toString() + 'T' + j.toString(), 'f': 'Transaction: ' + j.toString() + '<br>' + 
              'Amount: ' + auxiliar[i].transactions[j].amount + '<br>' + 'CardKey: ' + auxiliar[i].transactions[j].cardkey + '<br>' +
              'Date: ' + auxiliar[i].transactions[j].date + '<br>' + 'Location: ' + auxiliar[i].transactions[j].location + '<br>' + 
              'Recipient: ' + auxiliar[i].transactions[j].recipient + '<br>' + 'Sender: ' + auxiliar[i].transactions[j].sender },i.toString(),'']]);
              }else{
                data.addRows([[{'v': i.toString() + 'T' + j.toString(), 'f': 'Transaction: ' + j.toString() + '<br>' + 
              'Amount: ' + auxiliar[i].transactions[j].amount + '<br>' + 'CardKey: ' + auxiliar[i].transactions[j].cardkey + '<br>' +
              'Date: ' + auxiliar[i].transactions[j].date + '<br>' + 'Location: ' + auxiliar[i].transactions[j].location + '<br>' + 
              'Recipient: ' + auxiliar[i].transactions[j].recipient + '<br>' + 'Sender: ' + auxiliar[i].transactions[j].sender },i.toString() + 'T' + (j-1).toString(),'']]);
              }

            }
          }  
        }

        
        // Create the chart.
        var chart = new google.visualization.OrgChart(document.getElementById('chart_div'));
        // Draw the chart, setting the allowHtml option to true for the tooltips.
        chart.draw(data, {'allowHtml':true});
      }
   </script>
  </head>
  <body class="d-flex flex-column h-100">
    <header>
  <!-- Fixed navbar -->
  <nav class="navbar navbar-default">
	<div class="container-fluid">
	  <!-- Brand and toggle get grouped for better mobile display -->
	  <div class="navbar-header">
		<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
		  <span class="sr-only">Toggle navigation</span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		</button>
		<a class="navbar-brand" href="/">BLOCKCHAIN NODE</a>
	  </div>
  
	  <!-- Collect the nav links, forms, and other content for toggling -->
	  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		<ul class="nav navbar-nav">
		  <li class="active"><a href="/"> Home <span class="sr-only">(current)</span></a></li>
		  <li><a href="#">Extra Link</a></li>
		</ul>
		<p class="navbar-text">Nodo: {{ node_identifier }}</p>
	  </div><!-- /.navbar-collapse -->
	</div><!-- /.container-fluid -->
  </nav>
  <script type="text/javascript"> 
    $(window).load(function(){
      var lpm = {{response2|safe}};
      json_data = JSON.stringify(lpm);
      $(".modal-body").text(json_data); 
    $('#exampleModal').modal('show');

    }); 
  </script>
</header>
<!-- Begin page content -->
<main role="main" class="flex-shrink-0">
<!-- Button trigger modal -->
{% if response2 != undefined %}


<!-- Modal -->

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="false">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Nodo agregado!</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal"">Aceptar</button>
      </div>
    </div>
  </div>
</div>

{% endif %}
	<div class="jumbotron d-flex text-center">
        <div id="chart_div" style="overflow-x: scroll;"></div>
  </div>
</main>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
      <script>window.jQuery || document.write('<script src="../assets/js/vendor/jquery.slim.min.js"><\/script>')</script><script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
</html>